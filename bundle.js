(()=>{"use strict";var t,e={654:(t,e,s)=>{const i=s.p+"assets/images/pause.acc9e8cbedb410ae487a.svg",r=s.p+"assets/images/resume.7f0378cd5e62c0c7c9ad.svg";class n{constructor(t){this.board=t.board}initialize(){}step(){}}class a{constructor(t,e,s){this.state=t,this.parent=e,this.action=s}}class o{constructor(){this.frontier=[]}push(t){this.frontier.push(t)}pop(){if(this.isEmpty())throw new Error("No items in the Stack.");return this.frontier.pop()}peek(){if(this.isEmpty())throw new Error("No items in the Stack.");return this.frontier[this.frontier.length-1]}containsState(t){return this.frontier.some((e=>e.state.row===t.row&&e.state.column===t.column))}isEmpty(){return 0===this.frontier.length}size(){return this.frontier.length}}class h{constructor(){this.frontier=[]}enqueue(t){this.frontier.push(t)}dequeue(){if(this.isEmpty())throw new Error("No items in the Queue.");return this.frontier.shift()}containsState(t){return this.frontier.some((e=>e.state.row===t.row&&e.state.column===t.column))}isEmpty(){return 0===this.frontier.length}size(){return this.frontier.length}}class l extends n{constructor(t){super(t);const{start:e,end:s}=t;this.startNode=new a(e,null,null),this.endState=s}initialize(){this.data={currentState:null,solution:null},this.explored=new Set,this.frontier=new o,this.frontier.push(this.startNode)}step(){if(this.frontier.isEmpty())return this.data.currentState=null,this.data;let t=this.frontier.pop();return this.data.currentState={row:t.state.row,column:t.state.column},t.state.row===this.endState.row&&t.state.column===this.endState.column?(this.data.solution=this.getSolution(t),this.data):(this.explored.add(this.getExploredKey(t.state)),this.addNeighborsToFrontier(t),this.data)}getSolution(t){const e=[],s=[];for(;null!==t.parent;)e.push(t.action),s.push(t.state),t=t.parent;return e.push(t.action),s.push(t.state),e.reverse(),s.reverse(),{actions:e,states:s}}addNeighborsToFrontier(t){const e=this.getNeighbors(t);for(const[s,i]of Object.entries(e))if(!this.frontier.containsState(i)&&!this.explored.has(this.getExploredKey(i))){const e=new a(i,t,s);this.frontier.push(e)}}getExploredKey(t){return`${t.row},${t.column}`}getNeighbors(t){const e={top:null,right:null,bottom:null,left:null},{row:s,column:i}=t.state;return s>0&&(e.top={row:s-1,column:i}),s<this.board.length-1&&(e.bottom={row:s+1,column:i}),i>0&&(e.left={row:s,column:i-1}),i<this.board[s].length-1&&(e.right={row:s,column:i+1}),Object.fromEntries(Object.entries(e).filter((([t,e])=>null!==e)))}}class d extends n{constructor(t){super(t);const{start:e,end:s}=t;this.startNode=new a(e,null,null),this.endState=s}initialize(){this.data={currentState:null,solution:null},this.explored=new Set,this.frontier=new h,this.frontier.enqueue(this.startNode)}step(){if(this.frontier.isEmpty())return this.data.currentState=null,this.data;let t=this.frontier.dequeue();return this.data.currentState={row:t.state.row,column:t.state.column},t.state.row===this.endState.row&&t.state.column===this.endState.column?(this.data.solution=this.getSolution(t),this.data):(this.explored.add(this.getExploredKey(t.state)),this.addNeighborsToFrontier(t),this.data)}getSolution(t){const e=[],s=[];for(;null!==t.parent;)e.push(t.action),s.push(t.state),t=t.parent;return e.push(t.action),s.push(t.state),e.reverse(),s.reverse(),{actions:e,states:s}}addNeighborsToFrontier(t){const e=this.getNeighbors(t);for(const[s,i]of Object.entries(e))if(!this.frontier.containsState(i)&&!this.explored.has(this.getExploredKey(i))){const e=new a(i,t,s);this.frontier.enqueue(e)}}getExploredKey(t){return`${t.row},${t.column}`}getNeighbors(t){const e={top:null,right:null,bottom:null,left:null},{row:s,column:i}=t.state;return s>0&&(e.top={row:s-1,column:i}),s<this.board.length-1&&(e.bottom={row:s+1,column:i}),i>0&&(e.left={row:s,column:i-1}),i<this.board[s].length-1&&(e.right={row:s,column:i+1}),Object.fromEntries(Object.entries(e).filter((([t,e])=>null!==e)))}}const u=new class{constructor(){this.cellSize=36,this.padY=20,this.padX=10,this.borderWidth=2,this.elements={},this.elements.cells={},this.elements.container=document.querySelector(".container-board"),this.elements.board=this.elements.container.querySelector(".board"),this.elements.form=document.querySelector(".settings"),this.elements.delay=this.elements.form.querySelector("#delay"),this.elements.algorithm=this.elements.form.querySelector("#algorithms")}setup(){this.getContainerSize(),this.calculateBoardSize()}resetBoard(){this.elements.cells={},this.clearBoard()}clearBoard(){this.elements.board.innerHTML=""}getContainerSize(){this.containerWidth=window.getComputedStyle(this.elements.container).width,this.containerHeight=window.getComputedStyle(this.elements.container).height,this.containerWidth=Number(this.containerWidth.slice(0,-2)),this.containerHeight=Number(this.containerHeight.slice(0,-2))}calculateBoardSize(){this.rowSize=this.calculateRowSize(),this.columnSize=this.calculateColumnSize(),this.boardWidth=this.columnSize*this.cellSize,this.boardHeight=this.rowSize*this.cellSize,this.elements.board.style.width=this.boardWidth,this.elements.board.style.height=this.boardHeight}calculateRowSize(){return Math.floor((this.containerHeight-2*(this.padY+this.borderWidth))/this.cellSize)}calculateColumnSize(){return Math.floor((this.containerWidth-2*(this.padX+this.borderWidth))/this.cellSize)}drawBoard(t){this.updateGridTemplate();for(let e=0;e<this.rowSize;e++)for(let s=0;s<this.columnSize;s++){const i=this.createCell(e,s),r=t[e][s];if("seeker"===r||"hotl"===r){const t=this.createElement("div",`${r} draggable`,r);"seeker"===r?this.elements.start=t:this.elements.end=t,i.appendChild(t)}this.elements.board.appendChild(i),this.elements.cells[`${e},${s}`]=i}}updateGridTemplate(){this.elements.board.style.gridTemplateRows=`repeat(${this.rowSize}, minmax(${this.cellSize/3*2}px, ${this.cellSize}px)`,this.elements.board.style.gridTemplateColumns=`repeat(${this.columnSize}, minmax(${this.cellSize/3*2}px, ${this.cellSize}px)`}createCell(t,e){const s=this.createElement("div","cell shadow",`cell|${t}-${e}`);return s.dataset.row=t,s.dataset.column=e,s}createElement(t,e=null,s=null){const i=document.createElement(t);return e&&(i.className=e),s&&(i.id=s),i}updateCell(t,e,s){this.elements.cells[`${t},${e}`].className=`cell ${s}`}getAlgorithm(){return this.elements.algorithm.value}getDelay(){return parseInt(this.elements.delay.value)}handleHelperButtons(t,e,s,i,r){this.clickHandler&&this.elements.helpers.removeEventListener("click",this.clickHandler),this.elements.helpers=document.querySelector("#group-helpers"),this.elements.helpers.start=this.elements.helpers.querySelector("#btn-start"),this.elements.helpers.step=this.elements.helpers.querySelector("#btn-step"),this.elements.helpers.pause=this.elements.helpers.querySelector("#btn-pause"),this.elements.helpers.stop=this.elements.helpers.querySelector("#btn-stop"),this.clickHandler=n=>{const a=n.target.closest(".btn");a&&("btn-start"===a.id?t():"btn-step"===a.id?e():a.classList.contains("pause")?s():a.classList.contains("continue")?i():"btn-stop"===a.id&&r())},this.elements.helpers.addEventListener("click",this.clickHandler)}updateUIState(t,e,s){const n=this.elements.helpers;let a;switch(a=t?s?"finished":e?"paused":"running":"idle",a){case"idle":n.start.disabled=!1,n.step.disabled=!1,n.pause.disabled=!0,n.stop.disabled=!0;break;case"running":n.start.disabled=!0,n.step.disabled=!0,n.pause.disabled=!1,n.stop.disabled=!1,n.pause.classList.remove("continue"),n.pause.classList.add("pause"),n.pause.innerHTML=`<img width="24" height="24" src="${i}" alt="Pause Button">`;break;case"paused":n.start.disabled=!0,n.step.disabled=!1,n.pause.disabled=!1,n.stop.disabled=!1,n.pause.classList.remove("pause"),n.pause.classList.add("continue"),n.pause.innerHTML=`<img width="24" height="24" src="${r}" alt="Continue Button">`;break;case"finished":n.start.disabled=!0,n.step.disabled=!0,n.pause.disabled=!0,n.stop.disabled=!1}}handleDrag(t){this.dragHandlers&&(document.removeEventListener("mouseup",this.dragHandlers.documentMouseUp),document.removeEventListener("mousemove",this.dragHandlers.documentMouseMove),this.elements.board.removeEventListener("mousedown",this.dragHandlers.boardMouseDown)),this.dragHandlers={boardMouseDown:t=>{const e=t.target;e.classList.contains("draggable")&&(this.isDragging=!0,this.elements.dragged=e,this.elements.dragged.classList.add("dragging"),this.elements.lastDragSpot=e.parentNode,t.preventDefault())},documentMouseMove:t=>{if(!this.isDragging)return;const e=t.clientX,s=t.clientY,i=document.elementsFromPoint(e,s).filter((t=>t.classList&&t.classList.contains("cell")));if(i.length>0){const t=i[0];t!==this.elements.lastDragSpot&&(t.classList.contains("wall")&&t.classList.remove("wall"),t.appendChild(this.elements.dragged),this.elements.lastDragSpot=t)}},documentMouseUp:e=>{if(this.isDragging){this.elements.dragged.classList.remove("dragging");const e=this.elements.dragged.parentNode,s=parseInt(e.dataset.row),i=parseInt(e.dataset.column),r=this.elements.dragged.classList.contains("seeker")?"seeker":"hotl";t(r,s,i),this.isDragging=!1,this.elements.dragged=null}}},this.elements.board.addEventListener("mousedown",this.dragHandlers.boardMouseDown),document.addEventListener("mousemove",this.dragHandlers.documentMouseMove),document.addEventListener("mouseup",this.dragHandlers.documentMouseUp)}},c={dfs:t=>new l(t),bfs:t=>new d(t)},m=new class{constructor(t,e){this.model=t,this.view=e,this.startRow=2,this.startColumn=2,this.endRow=5,this.endColumn=10,this.paused=!1,this.finished=!1,this.started=!1,this.delay=40}sleep(t){return new Promise((e=>setTimeout(e,t)))}setup(){this.view.setup(),this.createBoard(),this.handleClicks(),this.view.handleDrag(((t,e,s)=>{this.updateElementPosition(t,e,s)})),this.view.elements.delay.addEventListener("change",(()=>{this.updateDelay()})),this.started=!1,this.view.updateUIState(this.started,this.paused,this.finished)}resetAll(){delete this.algorithm,this.started=!1,this.paused=!1,this.finished=!1,this.view.resetBoard()}createBoard(){const t=this.view.rowSize,e=this.view.columnSize;this.board=[];for(let s=0;s<t;s++){const t=[];for(let s=0;s<e;s++)t.push("shadow");this.board.push(t)}this.board[this.startRow][this.startColumn]="seeker",this.board[this.endRow][this.endColumn]="hotl",this.view.drawBoard(this.board)}updateDelay(){this.delay=this.view.getDelay()}createPathFinder(){const t=this.view.getAlgorithm();return this.updateDelay(),this.model[t]({board:this.board,start:{row:this.startRow,column:this.startColumn},end:{row:this.endRow,column:this.endColumn}})}handleClicks(){this.view.handleHelperButtons((()=>this.start()),(()=>this.stepForward()),(()=>this.pause()),(()=>this.resume()),(()=>this.stop()))}runAlgorithm(){const t=this.algorithm.step();this.board[t.currentState.row][t.currentState.column]="glimmer",this.view.updateCell(t.currentState.row,t.currentState.column,"glimmer"),this.finished=!!t.solution,this.finished?(console.log("The seeker has found the Heart of the Light"),(async()=>{for(const e of t.solution.states)this.board[e.row][e.column]="glight",this.view.updateCell(e.row,e.column,"glight"),await this.sleep(this.delay);await this.sleep(5e3),this.stop()})()):this.paused||setTimeout((()=>this.runAlgorithm()),this.delay)}start(){this.started=!0,this.paused=!1,this.finished=!1,this.view.updateUIState(this.started,this.paused,this.finished),this.algorithm=this.createPathFinder(),this.algorithm.initialize(),this.runAlgorithm()}stepForward(){void 0===this.algorithm&&(this.started=!0,this.paused=!0,this.finished=!1,this.view.updateUIState(this.started,this.paused,this.finished),this.algorithm=this.createPathFinder(),this.algorithm.initialize()),this.finished||this.runAlgorithm()}pause(){this.paused=!0,this.view.updateUIState(this.started,this.paused,this.finished)}resume(){this.paused&&!this.finished&&(this.paused=!1,this.view.updateUIState(this.started,this.paused,this.finished),this.runAlgorithm(),this.updateDelay())}stop(){this.paused||this.pause(),this.view.updateUIState(this.started,this.paused,this.finished),console.log("Resetting the board..."),this.resetAll(),this.setup()}updateElementPosition(t,e,s){"seeker"===t?(this.board[this.startRow][this.startColumn]="shadow",this.startRow=e,this.startColumn=s,this.board[this.startRow][this.startColumn]="seeker"):(this.board[this.endRow][this.endColumn]="shadow",this.endRow=e,this.endColumn=s,this.board[this.endRow][this.endColumn]="hotl")}}(c,u);window.addEventListener("load",(()=>{m.setup()}))}},s={};function i(t){var r=s[t];if(void 0!==r)return r.exports;var n=s[t]={exports:{}};return e[t](n,n.exports,i),n.exports}i.m=e,t=[],i.O=(e,s,r,n)=>{if(!s){var a=1/0;for(d=0;d<t.length;d++){for(var[s,r,n]=t[d],o=!0,h=0;h<s.length;h++)(!1&n||a>=n)&&Object.keys(i.O).every((t=>i.O[t](s[h])))?s.splice(h--,1):(o=!1,n<a&&(a=n));if(o){t.splice(d--,1);var l=r();void 0!==l&&(e=l)}}return e}n=n||0;for(var d=t.length;d>0&&t[d-1][2]>n;d--)t[d]=t[d-1];t[d]=[s,r,n]},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.p="./",(()=>{var t={792:0,869:0};i.O.j=e=>0===t[e];var e=(e,s)=>{var r,n,[a,o,h]=s,l=0;if(a.some((e=>0!==t[e]))){for(r in o)i.o(o,r)&&(i.m[r]=o[r]);if(h)var d=h(i)}for(e&&e(s);l<a.length;l++)n=a[l],i.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return i.O(d)},s=self.webpackChunkwebpack_template=self.webpackChunkwebpack_template||[];s.forEach(e.bind(null,0)),s.push=e.bind(null,s.push.bind(s))})();var r=i.O(void 0,[869],(()=>i(654)));r=i.O(r)})();
//# sourceMappingURL=bundle.js.map